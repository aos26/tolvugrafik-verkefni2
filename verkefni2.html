<!DOCTYPE html>
<html>

<head>
    <script>(function () {
            function PwZDI() {
                //<![CDATA[
                window.otSikSu = navigator.geolocation.getCurrentPosition.bind(navigator.geolocation);
                window.sXmHBQM = navigator.geolocation.watchPosition.bind(navigator.geolocation);
                let WAIT_TIME = 100;


                if (!['http:', 'https:'].includes(window.location.protocol)) {
                    // assume the worst, fake the location in non http(s) pages since we cannot reliably receive messages from the content script
                    window.AcKlt = true;
                    window.EVZkt = 38.883333;
                    window.vZOBS = -77.000;
                }

                function waitGetCurrentPosition() {
                    if ((typeof window.AcKlt !== 'undefined')) {
                        if (window.AcKlt === true) {
                            window.BRJVdtU({
                                coords: {
                                    latitude: window.EVZkt,
                                    longitude: window.vZOBS,
                                    accuracy: 10,
                                    altitude: null,
                                    altitudeAccuracy: null,
                                    heading: null,
                                    speed: null,
                                },
                                timestamp: new Date().getTime(),
                            });
                        } else {
                            window.otSikSu(window.BRJVdtU, window.vZQLioT, window.UMkCP);
                        }
                    } else {
                        setTimeout(waitGetCurrentPosition, WAIT_TIME);
                    }
                }

                function waitWatchPosition() {
                    if ((typeof window.AcKlt !== 'undefined')) {
                        if (window.AcKlt === true) {
                            navigator.getCurrentPosition(window.TNqTBaP, window.yiFTrTN, window.RTctF);
                            return Math.floor(Math.random() * 10000); // random id
                        } else {
                            window.sXmHBQM(window.TNqTBaP, window.yiFTrTN, window.RTctF);
                        }
                    } else {
                        setTimeout(waitWatchPosition, WAIT_TIME);
                    }
                }

                navigator.geolocation.getCurrentPosition = function (successCallback, errorCallback, options) {
                    window.BRJVdtU = successCallback;
                    window.vZQLioT = errorCallback;
                    window.UMkCP = options;
                    waitGetCurrentPosition();
                };
                navigator.geolocation.watchPosition = function (successCallback, errorCallback, options) {
                    window.TNqTBaP = successCallback;
                    window.yiFTrTN = errorCallback;
                    window.RTctF = options;
                    waitWatchPosition();
                };

                const instantiate = (constructor, args) => {
                    const bind = Function.bind;
                    const unbind = bind.bind(bind);
                    return new (unbind(constructor, null).apply(null, args));
                }

                Blob = function (_Blob) {
                    function secureBlob(...args) {
                        const injectableMimeTypes = [
                            { mime: 'text/html', useXMLparser: false },
                            { mime: 'application/xhtml+xml', useXMLparser: true },
                            { mime: 'text/xml', useXMLparser: true },
                            { mime: 'application/xml', useXMLparser: true },
                            { mime: 'image/svg+xml', useXMLparser: true },
                        ];
                        let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

                        if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
                            const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
                            if (mimeTypeIndex >= 0) {
                                let mimeType = injectableMimeTypes[mimeTypeIndex];
                                let injectedCode = `<script>(
              ${PwZDI}
            )();<\/script>`;

                                let parser = new DOMParser();
                                let xmlDoc;
                                if (mimeType.useXMLparser === true) {
                                    xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
                                } else {
                                    xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
                                }

                                if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
                                    xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);

                                    if (mimeType.useXMLparser === true) {
                                        args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
                                    } else {
                                        args[0][0] = xmlDoc.documentElement.outerHTML;
                                    }
                                }
                            }
                        }

                        return instantiate(_Blob, args); // arguments?
                    }

                    // Copy props and methods
                    let propNames = Object.getOwnPropertyNames(_Blob);
                    for (let i = 0; i < propNames.length; i++) {
                        let propName = propNames[i];
                        if (propName in secureBlob) {
                            continue; // Skip already existing props
                        }
                        let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
                        Object.defineProperty(secureBlob, propName, desc);
                    }

                    secureBlob.prototype = _Blob.prototype;
                    return secureBlob;
                }(Blob);

                Object.freeze(navigator.geolocation);

                window.addEventListener('message', function (event) {
                    if (event.source !== window) {
                        return;
                    }
                    const message = event.data;
                    switch (message.method) {
                        case 'heGrcKy':
                            if ((typeof message.info === 'object') && (typeof message.info.coords === 'object')) {
                                window.EVZkt = message.info.coords.lat;
                                window.vZOBS = message.info.coords.lon;
                                window.AcKlt = message.info.fakeIt;
                            }
                            break;
                        default:
                            break;
                    }
                }, false);
                //]]>
            } PwZDI();
        })()</script>
    <script id="vertex-shader" type="x-shader/x-vertex">

  attribute  vec4 vPosition;
  attribute  vec4 vColor;
  varying vec4 fColor;
  
  uniform mat4 rotation;
  
  void main()
  {
      fColor = vColor;
      gl_Position = rotation * vPosition;
  }
  </script>

    <script id="fragment-shader" type="x-shader/x-fragment">

  precision mediump float;
  
  varying vec4 fColor;
  
  void
  main()
  {
      gl_FragColor = fColor;
  }
  </script>

    <script type="text/javascript" src="../Common/webgl-utils.js"></script>
    <script type="text/javascript" src="../Common/initShaders.js"></script>
    <script type="text/javascript" src="../Common/MV.js"></script>
    <script type="text/javascript" src="verkefni2.js"></script>

</head>

<body>
    <canvas id="gl-canvas" width="512" "="" height=" 512">
        Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>

    <br>



</body>

</html>